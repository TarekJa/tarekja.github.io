const I18N = {
  ar: {
    dir: "rtl",
    lang: "ar",
    lblLang: "اللغة",
    back: "العودة للرئيسية",
    title: "سياسة الخصوصية",
    updated: "آخر تحديث: يناير 2026",
    h1: "ما الذي نجمعه؟",
    p1: "لا نجمع أي بيانات شخصية ولا نرسل أي معلومات تدخلها (اسمك، تاريخ ميلادك، ساعة ميلادك) إلى خوادمنا. كل الحسابات تتم محلياً داخل متصفحك فقط.",
    h2: "التخزين المحلي (Local Storage)",
    p2: "نحفظ بعض البيانات مؤقتاً داخل جهازك (مثل الاسم وتاريخ وساعة الميلاد) لتسهيل استخدامك في المرات القادمة. يمكنك مسحها في أي وقت بالضغط على زر «مسح» في الصفحة الرئيسية أو من إعدادات المتصفح.",
    h3: "الإعلانات وملفات تعريف الارتباط",
    p3: "نستخدم Google AdSense لعرض الإعلانات. قد تستخدم Google وشركاؤها ملفات تعريف الارتباط أو تقنيات مشابهة لعرض إعلانات مخصصة وقياس فعاليتها. يمكنك إدارة تفضيلاتك من إعدادات المتصفح أو من خلال إعدادات Google Ads.",
    h4: "ميزة مشاركة الرابط",
    p4: "عندما تشارك رابط النتيجة، يحتوي الرابط على المعلومات التي أدخلتها (تاريخ ووقت الميلاد إن وجد) ليتمكن الشخص الآخر من رؤية نفس النتيجة. لا يتم إرسال هذه البيانات إلى أي خادم خارجي.",
    h5: "كيف نتواصل معك؟",
    p5: "لأي استفسار أو اقتراح أو شكوى، يمكنك التواصل معي مباشرة عبر البريد: tarekjawish89@gmail.com",
    h6: "التغييرات على السياسة",
    p6: "قد نقوم بتحديث هذه السياسة من وقت لآخر. سيتم نشر النسخة الجديدة هنا مع تاريخ التحديث. استمرار استخدامك للموقع بعد أي تغيير يعني موافقتك على السياسة المحدثة.",
    foot: "باستمرارك في استخدام الموقع، فإنك توافق على هذه السياسة."
  },
  en: {
    dir: "ltr",
    lang: "en",
    lblLang: "Language",
    back: "Back to home",
    title: "Privacy Policy",
    updated: "Last updated: January 2026",
    h1: "What do we collect?",
    p1: "We do not collect any personal data and do not send any information you enter (name, birth date, birth time) to our servers. All calculations happen locally in your browser only.",
    h2: "Local Storage",
    p2: "We temporarily store some data on your device (name, birth date & time) to make your next visits easier. You can clear it anytime using the «Clear» button on the main page or from your browser settings.",
    h3: "Ads & Cookies",
    p3: "We use Google AdSense to display advertisements. Google and its partners may use cookies or similar technologies to serve personalized ads and measure performance. You can manage your preferences via browser settings or Google Ads settings.",
    h4: "Share Link Feature",
    p4: "When you share a result link, it may contain the information you entered (birth date/time if provided) so others can see the same result. This data is not sent to any external server.",
    h5: "How to contact us?",
    p5: "For any inquiry, suggestion or complaint, contact me directly at: tarekjawish89@gmail.com",
    h6: "Changes to this Policy",
    p6: "We may update this policy from time to time. The new version will be posted here with the update date. Your continued use of the site after any change constitutes acceptance of the updated policy.",
    foot: "By continuing to use the site, you agree to this policy."
  },
  tr: {
    dir: "ltr",
    lang: "tr",
    lblLang: "Dil",
    back: "Ana sayfaya dön",
    title: "Gizlilik Politikası",
    updated: "Son güncelleme: Ocak 2026",
    h1: "Ne topluyoruz?",
    p1: "Kişisel veri toplamıyoruz ve girdiğiniz bilgileri (isim, doğum tarihi, doğum saati) sunucularımıza göndermiyoruz. Tüm hesaplamalar yalnızca tarayıcınızda yerel olarak yapılır.",
    h2: "Yerel Depolama (Local Storage)",
    p2: "Kullanım kolaylığı için bazı verileri cihazınızda geçici olarak saklıyoruz (isim, doğum tarihi & saati). Ana sayfadaki «Temizle» butonuyla veya tarayıcı ayarlarından istediğiniz zaman silebilirsiniz.",
    h3: "Reklamlar ve Çerezler",
    p3: "Reklam göstermek için Google AdSense kullanıyoruz. Google ve iş ortakları kişiselleştirilmiş reklamlar sunmak ve performans ölçmek için çerez veya benzer teknolojiler kullanabilir. Tercihlerinizi tarayıcı ayarlarından veya Google Ads ayarlarından yönetebilirsiniz.",
    h4: "Bağlantı Paylaşma Özelliği",
    p4: "Sonuç bağlantısını paylaştığınızda, girdiğiniz bilgiler (doğum tarihi/saati varsa) bağlantıda yer alabilir ki başkası aynı sonucu görsün. Bu veriler herhangi bir dış sunucuya gönderilmez.",
    h5: "Bize nasıl ulaşılır?",
    p5: "Herhangi bir soru, öneri veya şikayet için doğrudan iletişime geçebilirsiniz: tarekjawish89@gmail.com",
    h6: "Politikadaki Değişiklikler",
    p6: "Bu politikayı zaman zaman güncelleyebiliriz. Yeni sürüm burada güncelleme tarihiyle birlikte yayınlanacaktır. Herhangi bir değişiklikten sonra siteyi kullanmaya devam etmeniz, güncellenmiş politikayı kabul ettiğiniz anlamına gelir.",
    foot: "Siteyi kullanmaya devam ederek bu politikayı kabul etmiş olursunuz."
  }
};

function $(id) { return document.getElementById(id); }

function setLanguage(lang) {
  if (!I18N[lang]) lang = "ar";
  const t = I18N[lang];

  document.documentElement.lang = t.lang;
  document.documentElement.dir = t.dir;

  $("lblLang").textContent = t.lblLang;
  $("backHome").textContent = t.back;
  $("title").textContent = t.title;
  $("updated").textContent = t.updated;

  $("h1").textContent = t.h1;   $("p1").textContent = t.p1;
  $("h2").textContent = t.h2;   $("p2").textContent = t.p2;
  $("h3").textContent = t.h3;   $("p3").textContent = t.p3;
  $("h4").textContent = t.h4;   $("p4").textContent = t.p4;
  $("h5").textContent = t.h5;   $("p5").textContent = t.p5;
  $("h6").textContent = t.h6;   $("p6").textContent = t.p6;

  $("foot").textContent = t.foot;

  $("langSelect").value = lang;
}

function pickLanguage() {
  // 1. URL ?lang=
  const urlLang = new URLSearchParams(location.search).get("lang");
  if (urlLang && I18N[urlLang]) return urlLang;

  // 2. Local Storage
  const saved = localStorage.getItem("lac_lang");
  if (saved && I18N[saved]) return saved;

  // 3. Browser language
  const langs = navigator.languages || [navigator.language || "en"];
  const lower = langs.map(l => l.toLowerCase());
  if (lower.some(l => l.startsWith("ar"))) return "ar";
  if (lower.some(l => l.startsWith("tr"))) return "tr";
  return "en";
}

document.addEventListener("DOMContentLoaded", () => {
  const lang = pickLanguage();
  setLanguage(lang);

  $("langSelect").addEventListener("change", e => {
    const newLang = e.target.value;
    localStorage.setItem("lac_lang", newLang);
    setLanguage(newLang);
  });
});
